#  · v0.3.0

## 逻辑视图语义理解 & 业务对象识别

### 产品需求说明书（Final PRD）

---

## 0. 文档说明

### 0.1 适用对象

* 产品经理：需求澄清与边界统一
* 交互 / 视觉设计：页面与信息架构设计
* 前端 / 后端工程师：功能实现
* 测试工程师：验收与测试用例设计

### 0.2 本文档解决的问题

1. 字段语义理解如何做，**结果是什么**
2. 如何基于字段语义理解，**识别业务对象**
3. 字段、表、业务对象三层之间的**关系与规则**
4. 哪些地方需要**人工裁决，哪些只给建议**
5. v0.3.0 的**能力边界与后续阶段的衔接**

---

## 1. 版本范围与能力边界（必须统一）

### 1.1 v0.3.0 支持的能力

✅ 支持：

* 基于逻辑视图的字段语义理解
* 字段角色（Field Role）的人工裁决
* 基于字段语义理解结果的**业务对象识别（建议）**
* 展示：

  * 字段 → 业务对象的归属关系
  * 业务对象 → 字段/属性的包含关系
  * 业务对象之间的关系（推断级、只读）

❌ v0.3.0 明确不支持：

* 术语（Term）管理与绑定
* 标签（Tag）管理与绑定
* 业务对象的最终裁决、拆分、合并
* 指标建模、质量/安全规则编辑

> **业务对象的最终确认与调整，统一在「业务对象建模阶段」完成。**

---

## 2. 核心概念与术语说明（统一口径）

### 2.1 逻辑视图（Logical View） 「后面可能要调整，需要跟ADP对齐」

对物理表的业务抽象，是语义理解与建模的**上下文容器**。

---

### 2.2 字段语义理解（Field Semantic Understanding）

对字段在业务中的**功能定位与含义**进行理解与确认的过程。

**最小完成标准**

* 每个字段必须确认一个【字段角色】

---

### 2.3 字段角色（Field Role）

用于描述字段在业务语义中的**职责定位**，而非技术类型。

字段角色是：

* 字段语义理解阶段的**核心裁决项**
* 表级语义理解与业务对象识别的**基础输入**

字段角色（v0.3.0）包括：

* 业务主键
* 关联标识
* 业务状态
* 时间字段
* 业务指标
* 业务属性
* 审计字段
* 技术字段

---

#### 2.3.1 推荐的「用户可理解角色名称」映射表（定版建议）

| 内部 Role（不变） | UI 展示名称（推荐） | 给用户的解释       |
| ----------- | ----------- | ------------ |
| Identifier  | **业务主键**    | 用来唯一标识一条业务记录 |
| ForeignKey  | **关联标识**    | 用于关联其他业务对象   |
| Status      | **业务状态**    | 描述业务所处的状态    |
| Time        | **时间字段**    | 描述时间点或时间范围   |
| Measure     | **业务指标**    | 可统计、可汇总的数值   |
| Attribute   | **业务属性**    | 描述业务特征的字段    |
| Audit       | **审计字段**    | 用于记录创建/修改信息  |
| Technical   | **技术字段**    | 系统或技术用途字段    |




### 2.4 业务对象（Business Object）

对现实业务世界中**可被识别和管理的业务实体**的抽象。

在 v0.3.0 中：

* 业务对象由系统**基于字段语义理解结果自动识别**
* 结果为**候选对象 / 建议对象**
* 不在本阶段做最终裁决

---

## 3. 字段语义理解的业务逻辑（核心）

### 3.1 字段语义理解的输入信号

字段语义理解基于以下特征综合判断：

1. **命名特征**

   * 字段名、前后缀、分词
2. **结构特征**

   * 数据类型、是否主键 / 外键、是否可空
3. **数据分布特征**

   * 唯一性、枚举性、空值率
4. **质量探查信号**

   * 唯一性、稳定性、异常比例（仅影响置信度）

> 质量信号**不直接决定语义结论**，仅用于置信度与风险提示。

---

### 3.2 字段语义理解的输出结果（字段级）

字段语义理解完成后，每个字段必须产出以下结果：

| 属性     | 说明                  |
| ------ | ------------------- |
| 字段角色   | Field Role（必选，人工裁决） |
| 业务名称   | 字段的业务语义名称（建议）       |
| 字段备注   | 对字段业务含义的解释          |
| 归属业务对象 | 系统识别的业务对象（可多个，建议）   |
| 对象内角色  | 主键 / 属性 / 状态 / 时间   |
| 置信度    | 对上述建议的可信程度          |

---

## 4. 字段 → 业务对象 的识别模型（重点）

### 4.1 核心原则（定版）

> **业务对象不是字段的别名，而是字段语义聚合后的业务实体抽象。**

因此，字段与业务对象之间允许多种关系模式。

---

### 4.2 支持的字段-对象识别模式（v0.3.0）

#### 模式 A：一个字段 → 一个业务对象

**场景示例**

```
status_code
status_name
```

**识别结果**

* 业务对象：状态
* status_code → 业务主键
* status_name → 业务属性

---

#### 模式 B：多个字段 → 一个业务对象（最常见）

**场景示例**

```
employee_id
employee_name
employee_gender
employee_level
```

**识别结果**

* 业务对象：员工
* employee_id → 主键
* 其余字段 → 属性

---

#### 模式 C：多个字段 → 多个业务对象

**场景示例**

```
order_id
order_amount
customer_id
customer_name
```

**识别结果（建议）**

* 对象 A：订单（order_id, order_amount）
* 对象 B：客户（customer_id, customer_name）

> v0.3.0 只做对象分组建议，不裁决。

---

#### 模式 D：字段为业务属性 → 对象属性关系呈现

**规则**

* 字段角色为【业务属性】的字段：

  * 不单独形成业务对象
  * 必须挂载在某个业务对象下

**展示示例**

```
业务对象：员工
  ├─ 主键：employee_id
  ├─ 属性：employee_name
  ├─ 属性：employee_gender
```

---

## 5. 业务对象之间的关系识别（呈现级）

### 5.1 关系来源

* 字段角色 = 关联标识
* 命名相似度
* 字段分组结果

### 5.2 关系呈现规则（v0.3.0）

* 仅展示“关联 / 引用”关系
* 不支持关系裁决、不支持编辑
* 明确标识为“系统识别建议”

---

## 6. 是否需要人工裁决业务对象？（关键决策说明）

### 6.1 结论（定版）

> **字段语义理解阶段不裁决业务对象，仅生成对象建议，是合理且必要的。**

---

### 6.2 原因分析

1. **决策层级不同**

   * 字段角色：局部、确定性高
   * 业务对象：整体、结构性决策

2. **用户心智不同**

   * 字段阶段：确认“字段是什么”
   * 对象阶段：确认“业务有哪些对象”

3. **工程可演进性**

   * 过早锁定对象，会导致后续拆分/合并成本极高

---

### 6.3 正确的阶段划分

| 阶段     | 行为        |
| ------ | --------- |
| 字段语义理解 | 生成业务对象建议  |
| 业务对象建模 | 人工确认、调整对象 |

---

## 7. 用户流程（端到端）

```text
进入逻辑视图
 → 字段语义理解（裁决字段角色）
 → 系统识别业务对象（建议）
 → 查看：
     - 对象列表
     - 对象-属性关系
     - 对象-对象关系
 → 进入业务对象建模阶段（后续版本）
```

---

## 8. 页面与功能说明（设计 / 开发对齐）

### 8.1 逻辑视图详情页（v0.3.0）

新增区域：

* **业务对象识别结果（建议）**

  * 对象名称
  * 包含字段
  * 字段角色
  * 置信度
  * 对象间关系（只读）

明确提示：

> ⚠️ 以下业务对象为系统识别建议，请在【业务对象建模】阶段确认。

---

## 9. 流程图（文本版）

### 9.1 字段理解 → 对象识别流程

```text
[开始]
   ↓
[进入逻辑视图]
   ↓
[字段语义理解（Role 裁决）]
   ↓
{字段角色是否完整？}
   ├─ 否 → 阻塞
   └─ 是
       ↓
[系统识别业务对象（建议）]
       ↓
[展示对象与字段、对象关系]
       ↓
[结束]
```

---


## 10. PRD 定版总结

>  v0.3.0 通过字段语义理解明确字段角色，并在此基础上生成业务对象识别建议，帮助用户从数据表中理解业务实体及其结构关系。业务对象的最终确认与调整将在后续业务对象建模阶段完成，以保证语义建模的稳定性与可演进性。

---


## 11. 相关文档
- [v0.3.0 字段角色定义说明.md](v0.3.0-字段角色定义说明.md)
- [v0.3.0 逻辑视图语义理解规则说明.md](v0.3.0-逻辑视图语义理解规则说明.md)




